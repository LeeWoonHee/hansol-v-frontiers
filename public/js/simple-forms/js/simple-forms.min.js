/*
* Name:    Simple Forms Core
* Version: 3.0
* Author:  Nicu Lucas
* Website: https://codecanyon.net/item/ajax-contact-form-mobile-first/25185499
* */
!function(e){"use strict";var t={invalidSelector:"[SimpleForms Alert] - Invalid selector passed:",invalidFormSelector:"[SimpleForms Alert] - Selected element is not a form: ",invalidSitekey:"[SimpleForms Alert] - Please check your reCaptcha SITE KEY or create a new SITE KEY here: https://www.google.com/recaptcha/admin/create | See http://projects.lucas-games.com/simple-forms/#docs for more info."};e.SimpleForms=function(e,a){if(!e||null==document.querySelector(e))return console.log(t.invalidSelector+e);if("form"!==document.querySelector(e).nodeName.toLowerCase())throw t.invalidFormSelector+e;var r={};r.selector=e,r.element=document.querySelectorAll(r.selector);var i=r.element;r.responseMessageTimeout,r.lang="en",r.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var i in a)a.hasOwnProperty(i)&&("object"==typeof a[i]?a[i]instanceof Array?e[i]=a[i].slice(0):e[i]=r.extend(e[i],a[i]):e[i]=a[i])}return e};var s=r.extend({},{action:"",defaultAction:"simple-forms/sendmail.php",theme:"white",fieldsStyle:"default-style",ajaxSubmit:!0,validate:!0,browserValidation:!1,validateOnKeyup:!0,tooltips:!0,showErrors:!0,errorClass:"error",debug:!0,redirect:{enabled:!1,url:"/",timeout:3},validator:{rules:{}},files:{enabled:!0,extensions:"jpg, jpeg, png, svg, txt, pdf, zip, mp4",min:0,max:20,maxFileSize:24,filesUploadHandler:"simple-forms/files-upload-handler.php"},responseMessageHideTimeout:4,hideFormAfterSubmit:!1,customSuccessMessage:"",captcha:{enabled:!0,type:"math",siteKey:"",theme:"light"},accessibility:{escapeReset:!1,tabHighlight:!1},consent:!1,lang:"en"},a);if(r.objectSize=function(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a},r.getParam=function(e){var t=null,a=[];return location.search.substr(1).split("&").forEach(function(r){(a=r.split("="))[0]===e&&(t=decodeURIComponent(a[1]))}),t},r.hasChild=function(e,t){return e!==t&&e.contains(t)},r.truncateName=function(e,t){var a=e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase(),r=e.replace("."+a,"");return r.length<=t?e:(r=r.substr(0,t)+(e.length>t?"...":""))+"."+a},r.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},r.getFileSize=function(e,t){return t||(t=2),e?parseInt(e)<1024?e+" B":parseInt(e)>=1024&&parseInt(e)<1e6?(e/1024).toFixed(t)+" Kb":parseInt(e)>=1e6&&parseInt(e)<1e9?(e/1048576).toFixed(t)+" Mb":parseInt(e)>=1e9?(e/1073741824).toFixed(t)+" Gb":void 0:"0 Mb"},r.createObjectURL=function(e){return void 0!==e?URL.createObjectURL(e):""},r.getLang=function(){var e,t;e=location.href;var a=new RegExp("[\\?&]lang=([^&#]*)").exec(e);return null!==(t=a?a[1]:null)&&""!==t?t:null!==s.lang&&""!==s.lang?s.lang:"en"},r.getFormID=function(e){return e&&e.getAttribute("data-simple-form-id")?e.getAttribute("data-simple-form-id"):null},r.xhrArray=[],r.getFormTargetResponse=function(e){if(!e)return null;var t=e.querySelector(".server-response");if(t)return t;var a=document.createElement("div");a.classList.add("server-response"),e.appendChild(a)},r.findParent=function(e,t){if(e&&t){for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}return!1},r.getNodeIndex=function(e){for(var t=0;e=e.previousSibling;)3===e.nodeType&&/^\s*$/.test(e.data)||t++;return t},r.setErrorMessage=function(e,t,a){if(e&&s.showErrors){var r,i,n,l=s.errorClass||"error";e.classList.add(l),e.setAttribute("aria-invalid",!0),(r=document.createElement("span")).classList.add("simple-error-label"),"error"===a&&r.classList.add("simple-alert"),s.tooltips&&(e.parentNode.style.position="relative",r.classList.add("simple-tooltip")),r.innerHTML=t,(i=(n=e.parentNode).querySelector(".simple-error-label"))?i=n.replaceChild(r,i):e.parentNode.insertBefore(r,e.nextSibling),e.parentNode.classList.add("invalid-field")}},r.cleanErrorMessage=function(e){if(e){var t=s.errorClass||"error";e.classList.remove(t),e.setAttribute("aria-invalid",!1);var a=e.parentNode.querySelector(".simple-error-label");a&&a.parentNode.removeChild(a),e.parentNode.classList.remove("invalid-field")}},r.isExcluded=function(e){var t=!1;if(null!=e){var a=["hidden","file","submit"];a.forEach(function(){if(a.indexOf(e.type)>=0)return t=!0,!0}),["ignore","novalidate","no-validate","no_validate"].forEach(function(a){if(e.classList.contains(a))return t=!0,!0})}return t},r.isValid=function(e,t){if(e&&t)switch(t){case"name":return/^([^0-9]*)$/.test(e);case"phone":return e.replace(/\D/g,"").length>=8;case"email":return/^(([^<>()\[\].,;:\s@"]+(\.[^<>()\[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i.test(e);case"date":return/^\d{2}([.\/-])\d{2}\1\d{4}$/.test(e)||/^\d{4}([.\/-])\d{2}\1\d{2}$/.test(e)||/^\d{2}([.\/-])\d{2}\1\d{2}$/.test(e);case"url":var a="//"+e;return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a);default:return!0}return!1},r.isValidForm=function(e){return!(!e||"form"!==e.nodeName.toLowerCase())&&e.querySelectorAll("."+s.errorClass||"error").length<=0},r.validateForm=function(e){if("form"===e.nodeName.toLowerCase()){["input","select","textarea"].forEach(function(t){var a=e.querySelectorAll(t);if(a)for(var i=0;i<a.length;i++){var s=a[i];r.validate(s),s.dispatchEvent(new Event("change"))}})}},r.validate=function(e,t){if(null!==e&&!r.isExcluded(e)){var a=e.getAttribute("minlength")||e.getAttribute("min"),i=e.getAttribute("maxlength")||e.getAttribute("max"),s=parseInt(a),n=parseInt(i),l={};if(e.hasAttribute("required")&&e.value.length<1)"textarea"===e.type?(l.description="Please drop us a line...",r.setErrorMessage(e,translations[r.lang].textareaRequiredMessage,"error")):"select-one"===e.type?(l.description="Please choose an option.",r.setErrorMessage(e,translations[r.lang].chooseOption,"error")):(l.description="This field is required.",r.setErrorMessage(e,translations[r.lang].requiredField,"error"));else if(a&&e.value.length<s)l.description="Min required characters: ("+s+")",r.setErrorMessage(e,translations[r.lang].minRequiredCharacters+" ("+s+")","warning");else if(i&&e.value.length>n)l.description="Max allowed characters ("+n+")",r.setErrorMessage(e,translations[r.lang].maxAllowedCharacters+" ("+n+")","warning");else if(t)switch(t=t.trim().toLowerCase()){case"name":r.isValid(e.value,"name")||(l.description="Invalid name field.",r.setErrorMessage(e,translations[r.lang].invalidNameField,"warning"));break;case"phone":r.isValid(e.value,"phone")||(l.description="Invalid phone field.",r.setErrorMessage(e,translations[r.lang].invalidPhoneField,"warning"));break;case"email":r.isValid(e.value,"email")||(l.description="Invalid email field.",r.setErrorMessage(e,translations[r.lang].invalidEmailField,"warning"));break;case"url":r.isValid(e.value,"url")||(l.description="Invalid url field.",r.setErrorMessage(e,translations[r.lang].invalidUrlField,"warning"));break;case"date":r.isValid(e.value,"date")||(l.description="Invalid date field.",r.setErrorMessage(e,translations[r.lang].invalidDateField,"warning"));break;default:return!1}({target:e,errors:l}),r.objectSize(l)<1&&r.cleanErrorMessage(e)}},r.handleFieldValidation=function(e,t){if(t=t.trim(),!(e&&s.validate&&t.length))return!1;e.addEventListener("change",function(){r.validate(e,t)},!1),s.validateOnKeyup&&e.addEventListener("keyup",function(){r.validate(e,t)},!1)},r.initValidation=function(e){if(null!=e){["input","select","textarea"].forEach(function(t){var a=e.querySelectorAll(t);if(a)for(var i=0;i<a.length;i++){var n=a[i];n.getAttribute("title")||n.setAttribute("title",""),s.validate&&(n.onchange=function(e){r.validate(e.target)},s.validateOnKeyup&&(n.onkeyup=function(e){r.validate(e.target)}))}}),e.onchange=function(){s.captcha.enabled&&"recaptcha-v3"===s.captcha.type&&r.updateCaptcha(e)};var t=s.validator.rules;for(var a in t)if(t.hasOwnProperty(a)){var i=a,n=t[i],l=e.querySelector(i.trim());if(null!=l&&r.objectSize(n)>0)for(var o in n)if(n.hasOwnProperty(o)){var d=n[o];switch(o){case"required":s.validate&&d?l.setAttribute("required","required"):l.removeAttribute("required");break;case"min":s.validate&&d>=0&&l.setAttribute("min",parseInt(d));break;case"max":s.validate&&d>=0&&l.setAttribute("max",parseInt(d));break;case"name":s.validate&&r.handleFieldValidation(l,"name"),l.addEventListener("validationCheck",function(e){r.handleFieldValidation(l,"name")},!1);break;case"phone":s.validate&&r.handleFieldValidation(l,"phone");break;case"email":s.validate&&r.handleFieldValidation(l,"email");break;case"url":s.validate&&r.handleFieldValidation(l,"url");break;case"date":s.validate&&r.handleFieldValidation(l,"date");break;default:return!1}}}}},r.disableSubmitButton=function(e){if(e){var t=e.querySelector('[type="submit"]');t&&t.classList.add("disabled")}},r.enableSubmitButton=function(e){if(e){var t=e.querySelector('[type="submit"]');t&&t.classList.remove("disabled")}},r.updateMathCaptcha=function(e){if(e){var t=e.querySelector(".simple-captcha-wrapper");t&&t.remove(),r.initMathCaptcha(e)}},r.initMathCaptcha=function(e){if(e){var t=e.querySelector(".simple-captcha-wrapper");if(!t){(t=document.createElement("div")).classList.add("simple-captcha-wrapper");var a=e.querySelector('[type="submit"]');if(a){var i=a.parentNode;i!==e?e.insertBefore(t,i):e.appendChild(t)}else e.appendChild(t);console.warn("[Simple Forms Warning] .math_captcha_wrapper element missing!")}var n=document.createElement("input"),l=document.createElement("input"),o=document.createElement("input"),d=r.getRandomInt(0,5),c=r.getRandomInt(1,5),u=parseInt(d+c),f=d+" + "+c+" = ?",p=s.errorClass||"error";n.setAttribute("value",d),n.setAttribute("type","hidden"),n.setAttribute("name","math-solver-min"),l.setAttribute("value",c),l.setAttribute("type","hidden"),l.setAttribute("name","math-solver-max"),o.classList.add("math-solver"),o.setAttribute("type","text"),o.setAttribute("name","math-solver"),o.setAttribute("required","required"),o.setAttribute("placeholder",f),t.appendChild(n),t.appendChild(l),t.appendChild(o);var m=e.querySelector('[name="math-solver"]'),g=function(){parseInt(m.value)===u?(m.classList.remove(p),r.cleanErrorMessage(m)):(m.classList.add(p),r.setErrorMessage(m,translations[r.lang].requiredField,"error"))};m&&(m.addEventListener("change",g,!1),m.addEventListener("keyup",g,!1),m.addEventListener("paste",g,!1))}},r.initRecaptcha=function(e,a){if(e){if("v2"===a){if(!s.captcha.siteKey.length)throw t.invalidSitekey;if(!document.querySelector("#simple-forms-recaptcha-api-v2")){var r=s.captcha.siteKey,i=document.createElement("div");i.classList.add("g-recaptcha"),i.setAttribute("data-sitekey",r),i.setAttribute("data-theme",s.captcha.theme||"light");var n=e.querySelector(".simple-captcha-wrapper");n?n.appendChild(i):e.appendChild(i);var l=document.createElement("script");l.id="simple-forms-recaptcha-api-v2",l.src="//www.google.com/recaptcha/api.js",l.async=!0,l.defer=!0,document.head.appendChild(l)}}else{if("v3"!==a)return!1;if(!s.captcha.siteKey.length)throw t.invalidSitekey;if(!document.querySelector("#simple-forms-recaptcha-api-v3")){var o=s.captcha.siteKey,d=document.createElement("script");d.id="simple-forms-recaptcha-api-v3",d.src="//www.google.com/recaptcha/api.js?render="+o,d.async=!0,d.defer=!0,document.body.appendChild(d)}}var c=document.createElement("input");c.type="hidden",c.name="sf-recaptcha-version","v3"===a?c.value="v3":"v2"===a&&(c.value="v2"),e.appendChild(c)}},r.initCaptcha=function(e){if(e&&s.captcha.enabled)switch(s.captcha.type){case"math":r.initMathCaptcha(e);break;case"recaptcha-v2":r.initRecaptcha(e,"v2");break;case"recaptcha-v3":r.initRecaptcha(e,"v3");break;default:return!1}},r.updateCaptcha=function(e){if(e&&s.captcha.enabled)switch(s.captcha.type){case"math":r.initMathCaptcha(e),r.updateMathCaptcha(e);break;case"recaptcha-v3":if(!s.captcha.siteKey.length)throw t.invalidSitekey;"undefined"!=typeof grecaptcha&&grecaptcha.ready(function(){grecaptcha.execute(s.captcha.siteKey,{action:"homepage"}).then(function(t){var a,r=document.querySelector(".g_response_field");r&&r.parentNode.removeChild(r),(a=document.createElement("input")).type="hidden",a.name="g-recaptcha-response",a.classList.add("g_response_field"),a.value=t,e.appendChild(a)})});break;default:return!1}},r.initConsent=function(e){if(e&&s.consent){var t=e.querySelector('[type="submit"]'),a=e.querySelector(".simple-consent-checkbox");a||s.debug&&console.warn("[Simple Forms Warning] Consent checkbox is missing or has wrong class! Please add .simple-consent-checkbox class to your consent checkbox.");var r=function(){a.checked?t.classList.remove("disabled"):t.classList.add("disabled")};t&&a&&(r(),a.addEventListener("change",r,!1))}},r.removeFilesList=function(e){if(e){var t=e.querySelector(".sf-list");t&&t.remove()}},r.resetForm=function(e){if("form"===e.nodeName.toLowerCase()){e.reset();["input","select","textarea"].forEach(function(t){var a=e.querySelectorAll(t);if(a)for(var i=0;i<a.length;i++){var s=a[i];r.cleanErrorMessage(s)}}),r.deleteFormFiles(e),r.removeFilesList(e),e.classList.remove("tab_highlight")}},r.initAccessibility=function(e){e&&(e.onkeyup=function(e){"Escape"===e.key&&s.accessibility.escapeReset&&r.resetForm(e.target.form),"Tab"===e.key&&s.accessibility.tabHighlight&&e.target.form.classList.add("tab_highlight")})},r.getFileExtension=function(e){if(e)return(e=encodeURI(e)).split(".").pop()},r.isJSON=function(e){return!!e.length&&/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},r.initFilesList=function(e){if(e)if("FORM"===e.tagName){var t=e.querySelector(".simple-files");if(t){if(!e.querySelector(".sf-list")){var a=document.createElement("div");a.classList.add("sf-list"),a.innerHTML='<div class="sf-header">\n                                    <div>\n                                       <div class="sf-counter">\n                                            <span class="sf-counter-number">\n                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20"><path fill="#B8B8B8" d="M240 216V32H92a12 12 0 00-12 12v424a12 12 0 0012 12h328a12 12 0 0012-12V224H248a8 8 0 01-8-8z"/><path fill="#B8B8B8" d="M272 41.69V188a4 4 0 004 4h146.31a2 2 0 001.42-3.41L275.41 40.27a2 2 0 00-3.41 1.42z"/></svg>\n                                                <span class="sf-files-count">0</span>\n                                            </span>\n                                            <span class="sf-counter-size"> (<span class="sf-files-size">0 Mb</span>) </span>\n                                        </div>\n                                    </div>\n                                    <div>\n                                        <span class="sf-closer sf-ajax-abort">\n                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"><path d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z"/></svg>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class="sf-items simple-scrollbar"></div>',t.appendChild(a)}}else console.warn("[Simple Forms Warning] Cannot update files list! .simple-files element missing, please check your form HTML markup")}else console.warn("[Simple Forms Warning] Cannot init files list, invalid form selector provided!")},r.setSuccessFile=function(e,t){if(e&&t){var a=e.querySelector(`.sf-file-item[data-filename="${t.name}"]`);a&&a.classList.add("sf-upload-success")}},r.setErrorFile=function(e,t,a){if(e&&t){var r=e.querySelector(`.sf-file-item[data-filename="${t.name}"]`),i=r.querySelector(".simple-tip"),s="";if(a.length)for(var n=0;n<a.length;n++)s+=`<span>${a[n]}</span>`;if(r)if(r.classList.add("sf-upload-error"),i)i.innerHTML=s;else{var l=document.createElement("span");l.classList.add("simple-tip"),a.length&&(l.innerHTML=s,r.appendChild(l))}}},r.addErrorInfo=function(e,t,a){if(!e||!t)return console.warn("[Simple Forms Warning] Bad form selector or try to upload invalid files");if(r.getFormTargetResponse(e)){var i="";if(a.length)for(var s=0;s<a.length;s++){i+=`<span>${a[s]}</span>`}r.showMessage(e,i,"error",!0)}},r.updateFilesCount=function(e){if(e){var t=e.querySelector(".sf-files-count"),a=e.querySelector(".sf-files-size"),i=e.querySelectorAll(".sf-file-item"),s=0,n=0;if(i){s=i.length;for(var l=0;l<i.length;l++){var o=i[l];n+=parseInt(o.getAttribute("data-filesize"))}}t&&(t.innerHTML=s),a&&(a.innerHTML=r.getFileSize(n,0))}},r.addFileToList=function(e,t){if(e&&t){e.querySelector(".sf-items")||r.initFilesList(e);var a=e.querySelector(".sf-items");if(a){var i,n=r.truncateName(t.name||"",16),l=t.size||0,o=r.getFileSize(t.size),d="";/\.(?=gif|jpg|png|jpeg|svg|webp)/gi.test(t.name)&&(i=r.createObjectURL(t))&&(d=`<span class="simple-tip"> <span class="sf-preview-image"> <img src="${i}" alt="" draggable="false"> </span> </span>`);var c=document.createElement("div");c.classList.add("sf-file-item"),c.setAttribute("data-filename",t.name),c.setAttribute("data-filesize",l),c.innerHTML=`<div class="sf-col-left">\n                                                        <span class="sf-file-info">${n} <span class="sf-file-size">(${o})</span></span>\n                                                    </div>\n                                                    <div class="sf-col-right"><span class="sf-closer sf-item-cancel"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 512 512"><path d="M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z"/></svg></span></div>\n                                                    <div class="sf-item-progress">\n                                                        <div class="sf-progress" style="width: 0%"></div>\n                                                    </div>\n                                                ${d}`,a.append(c),r.updateFilesCount(e)}else s.debug&&console.warn("[Simple Forms Warning] Undefined files list.")}},r.getFileProgressBar=function(e,t){if(e&&t){var a=e.querySelector(`.sf-file-item[data-filename="${t.name}"]`).querySelector(".sf-progress");return a||null}return null},r.updateFileProgress=function(e,t){if(e.lengthComputable&&t){var a=parseInt(100*e.loaded/e.total||100);t.style.width=a+"%"}},r.uploadFile=function(e,t){var a,i=s.files.filesUploadHandler||"simple-forms/files-upload-handler.php",n=new XMLHttpRequest,l=new FormData,o=[],d=r.getFormID(e);r.xhrArray[d].push(n),l.append("file",t),n.open("POST",i),r.disableSubmitButton(e),r.addFileToList(e,t);var c=r.getFileProgressBar(e,t);c&&n.upload.addEventListener("progress",function(e){r.updateFileProgress(e,c)}),n.send(l),n.onloadend=function(i){if(r.enableSubmitButton(e),0===i.target.status){a=translations[r.lang].uploadFailed;var s=` [Simple Forms Warning] ${t.name} Upload failed... Please try again.`;o.push(a),r.setErrorFile(e,t,o),console.warn(s)}else if(400===i.target.status)a="Bad request.. Please try again",o.push(a),r.setErrorFile(e,t,o),console.warn(a);else if(200===i.target.status)if(r.isJSON(i.target.response)){var n=JSON.parse(i.target.response);switch(n.status){case"success":if(n.url&&n.name&&n.size){var l=document.createElement("input");l.type="hidden",l.name="ajax-file[]",l.value=n.url,l.classList.add("sf-ajax-file"),l.setAttribute("data-name",n.name),l.setAttribute("data-size",n.size),e.append(l),r.setSuccessFile(e,t)}break;case"error":var d=translations[r.lang].unknownServerError,c=n.errors;if("object"==typeof c)for(var u=0;u<r.objectSize(c);u++)o.push(c[u]);else o.push(d);r.setErrorFile(e,t,o),r.showMessage(e,d,"error");break;default:o.push("Unknown Server Error... Please try again"),r.setErrorFile(e,t,o),console.error("[Simple Forms Alert!] Invalid JSON format. Please check your files upload handler"),console.log(n)}}else console.error("[Simple Forms Alert!] Server response is not a valid JSON. Please check your files upload handler"),console.log(i.target.response)}},r.fileExist=function(e,t){if(e&&t){var a=t.name;return!!e.querySelector(`.sf-file-item[data-filename="${a}"]`)}return!1},r.getFilesCount=function(e){return e?e.querySelectorAll(".sf-file-item").length:-1},r.validateFiles=function(e,t){if(e&&"object"==typeof t)for(var a=0;a<t.length;a++){var i=t[a],n=r.getFileExtension(i.name),l=i.size||0,o=1048576*parseInt(s.files.maxFileSize),d=parseInt(s.files.maxFileSize),c=[];if(l>o){var u=translations[r.lang].maxAllowedFileSize+`${d}Mb`;c.push(u)}if(s.files.extensions.length){var f=s.files.extensions.split(" ");if(f.length&&-1===f.indexOf(n)){var p=`${n} - `+translations[r.lang].filesNotAllowed;c.push(p)}}if(r.fileExist(e,i)){var m=`(${r.truncateName(i.name,10)}) - `+translations[r.lang].fileAlreadyExist;c.push(m)}var g=parseInt(s.files.max);if(g>0&&parseInt(r.getFilesCount(e))>g-1){var h=translations[r.lang].maxAllowedFiles+` (${g}) !`;c.push(h)}c.length?(s.debug&&console.log(c),r.addErrorInfo(e,i,c)):r.uploadFile(e,i)}else r.showMessage(e,translations[r.lang].invalidFiles,"error")},r.deleteFileItem=function(e,t){if(!e||!t)return!1;var a=r.getNodeIndex(t),i=r.getFormID(e),s=t.getAttribute("data-filename"),n=e.querySelector(`input.sf-ajax-file[data-name="${s}"]`);a>=0&&(r.xhrArray[i][a].abort(),r.xhrArray[i].splice(a,1)),n&&n.remove(),t&&t.remove(),r.updateFilesCount(e)},r.deleteFormFiles=function(e){if(!e)return!1;var t=e.querySelectorAll(".sf-file-item"),a=e.querySelectorAll(".sf-ajax-file"),i=r.getFormID(e);if(t){for(var s=0;s<t.length;s++){var n=t[s],l=r.getNodeIndex(n);l>=0&&r.xhrArray[i][l].abort()}r.xhrArray[i]=[];for(var o=0;o<t.length;o++)t[o].remove()}if(a)for(var d=0;d<a.length;d++)a[d].remove();r.updateFilesCount(e)},r.initFiles=function(e){if(e){var t=function(e){e.preventDefault(),e.stopPropagation()},a=function(){e.classList.add("highlight","drop-area")},i=function(){e.classList.remove("highlight","drop-area")},n=new XMLHttpRequest,l=e.querySelector("input[type=file]");n.upload?(e.addEventListener("drop",function(e){var t,a=e.dataTransfer.files;t="FORM"===e.target.tagName?e.target:e.target.form,r.validateFiles(t,a)},!1),["dragenter","dragover","dragleave","drop"].forEach(a=>{e.addEventListener(a,t,!1)}),["dragenter","dragover"].forEach(t=>{e.addEventListener(t,a,!1)}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,i,!1)}),l.addEventListener("change",function(t){if(t.target){var a=t.target.files;r.validateFiles(e,a),t.target.value=""}},!1)):s.debug&&console.warn("[Simple Forms Alert] XMLHttpRequest Upload not available.");var o=r.getFormID(e);r.xhrArray[o]=[],parseInt(s.files.min)>0&&r.initFilesList(e),e.onclick=function(t){if(t.target.classList.contains("sf-item-cancel")){var a=r.findParent(t.target,".sf-file-item");r.deleteFileItem(e,a)}t.target.classList.contains("sf-ajax-abort")&&(r.deleteFormFiles(e),r.removeFilesList(e))}}},r.showMessage=function(e,t,a,i){if(a||(a="info"),e&&t&&t.length){if(!e.querySelector(".server-response")){var n=document.createElement("div");n.classList.add("server-response"),e.appendChild(n)}var l=e.querySelector(".server-response");if(l.innerHTML="",l.innerHTML=`<div class="sf-message sf-${a}-message"><span>${t}</span></div>`,parseInt(s.responseMessageHideTimeout)>0&&i){var o=1e3*parseInt(s.responseMessageHideTimeout);clearTimeout(r.responseMessageTimeout),r.responseMessageTimeout=setTimeout(function(){l.querySelector(".sf-message").classList.add("sf-hide")},o)}}},r.handleFormSubmit=function(e){if(e){var t=function(t){if(s.ajaxSubmit&&t.preventDefault(),r.validateForm(e),r.isValidForm(e)){var a=parseInt(s.files.min);if(a>0&&parseInt(r.getFilesCount(e))<a){var i=translations[r.lang].minRequiredFiles+` (${a}) !`;return r.showMessage(e,i,"error",!0),console.warn(i),!1}var n,l,o,d=new XMLHttpRequest,c=new FormData(e),u=e.getAttribute("action")||s.defaultAction,f="";d.open("POST",u),d.send(c),d.onerror=function(e){console.warn(translations[r.lang].submissionFailed),console.log(e)},document.onkeyup=function(e){"Escape"===e.key&&(d.abort(),console.warn("[Simple Forms Warning] Form submission aborted."))},d.onloadend=function(t){if(0===t.target.status)n=translations[r.lang].submissionFailed,l=translations[r.lang].submissionFailed,r.showMessage(e,n,"error",!0),s.debug&&console.warn(l);else if(400===t.target.status)n=translations[r.lang].badRequest,l=translations[r.lang].badRequest,r.showMessage(e,n,"error",!0),s.debug&&console.warn(l);else if(200===t.target.status)if(r.isJSON(t.target.response)){switch((o=JSON.parse(t.target.response)).status){case"success":if(s.customSuccessMessage&&s.customSuccessMessage.length>0&&(o.message=s.customSuccessMessage),s.hideFormAfterSubmit){var a=document.createElement("p");a.classList.add("sf-short-response"),a.innerHTML=o.message,e.parentNode.appendChild(a),e.remove()}if(o.message&&r.showMessage(e,o.message,"success",!0),s.redirect.enabled){var i=s.redirect.timeout>0?1e3*parseInt(s.redirect.timeout):0,d=""!==s.redirect.url?s.redirect.url:window.location.href;if(i<=0)return void(window.location.href=d);setTimeout(function(){window.location.href=d},i)}r.resetForm(e),r.updateCaptcha(e);break;case"error":var c=translations[r.lang].unknownServerError,u=o.errors;if("object"==typeof u){for(var p=0;p<r.objectSize(u);p++)f+=`<span>${u[p]}</span>`;r.showMessage(e,f,"error")}else r.showMessage(e,c,"error");break;default:r.showMessage(e,o,"error",!0),s.debug&&console.error("[Simple Forms Alert] Invalid JSON response format. Please check your form handler.")}s.debug&&o&&console.log(o)}else l="[Simple Forms Alert] Server response is not a valid JSON. Please check your form handler",r.showMessage(e,t.target.response,"info",!0),s.debug&&(console.error(l),console.log(t.target.response))}}else s.debug&&console.log(translations[r.lang].invalidForm),r.showMessage(e,translations[r.lang].invalidForm,"error")};e.addEventListener("submit",t,!1),e.submit=t}},r.initForm=function(e){if(e.classList.contains("simple-form")||e.classList.add("simple-form"),s.theme){["white","dark","purple","red","green","blue","faded-light","faded-dark","custom"].indexOf(s.theme)>=0?e.classList.add(s.theme):e.classList.add("white")}if(s.fieldsStyle){["default","classic","classic-rounded","modern","modern-rounded","custom"].indexOf(s.fieldsStyle)>=0?e.classList.add(s.fieldsStyle+"-style"):e.classList.add("default-style")}s.action?e.setAttribute("action",s.action||s.defaultAction):e.getAttribute("action")||e.setAttribute("action",s.defaultAction),r.lang=r.getLang()||"en",e.getAttribute("enctype")||e.setAttribute("enctype","multipart/form-data"),e.getAttribute("method")||e.setAttribute("method","post"),e.setAttribute("data-simple-form-id","sf-"+r.getRandomInt(201,999)),e.setAttribute("data-lang",r.lang);var t=document.createElement("input");t.type="hidden",t.name="sf-language",t.value=r.lang,e.appendChild(t),!1===s.browserValidation&&e.setAttribute("novalidate",""),s.formCSS&&s.formCSS.length&&e.setAttribute("style",s.formCSS),r.initValidation(e),r.initCaptcha(e),r.initConsent(e),r.initFiles(e),r.initAccessibility(e),r.handleFormSubmit(e)},i.length)for(var n=0;n<i.length;n++)r.initForm(i[n]);return r}}(window);